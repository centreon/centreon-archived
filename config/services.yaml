# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.

# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices/configuration.html#application-related-configuration

parameters:
    locale: en
    database_host: "%env(hostCentreon)%"
    database_port: "%env(port)%"
    database_db: "%env(db)%"
    database_dbstg: "%env(dbcstg)%"
    database_user: "%env(user)%"
    database_password: "%env(password)%"

services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, et
#
#    CentreonLegacy\:
#        resource: '../src/CentreonLegacy/*'
#        exclude: '../src/CentreonLegacy/Core/Install/Step'
#
#    CentreonModule\:
#        resource: '../src/CentreonModule/*'
#        exclude: '../src/CentreonModule/Tests'
#
#    CentreonRemote\:
#        resource: '../src/CentreonRemote/*'
#        exclude: '../src/CentreonRemote/Tests'

    App\EventSubscriber\:
        resource: '../src/EventSubscriber/*'

    # mandatory to use 'view_response_listener: true' in the fost rest config failed
    sensio_framework_extra.view.listener:
        alias: Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener

    # We defined the contact authenticator

    security.provider.tokenapi:
        class: App\Security\TokenAPIAuthenticator
        public: false

    security.provider.sessionapi:
        class: App\Security\SessionAPIAuthenticator
        public: false

    Centreon\Domain\EntityValidator:
        class: Centreon\Domain\EntityValidator
        arguments: ["%env(_CENTREON_PATH_)%config/packages/validator/validation.yaml"]

imports:
    resource: './Modules/*.yaml'